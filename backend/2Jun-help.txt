What This Code Fixes
Think of your old code like a security guard who only saw "DANGER" everywhere. The new code is like training that guard with a handbook of examples, showing them what normal visitors look like versus actual threats.
Key improvements:

Teaching by examples - Shows the AI what legitimate messages look like
Confidence scoring - Now you get a number (1-100) showing how sure the AI is
Smart fallback - If AI fails, it uses keyword detection as backup
Alert levels - Tells you exactly how strongly to warn users

How to Use This

Replace your file: Copy the entire code above and paste it over your current main.py
Test immediately: Start your server and visit http://localhost:5000/test in your browser. This will run 5 test messages and show you the accuracy.
Check the results: You should now see varied confidence scores instead of everything being marked as scam.

Understanding the New Response Format
Your Android app will now receive responses like this:
json{
  "classification": "LEGITIMATE",
  "confidence": "HIGH",
  "confidence_score": 92,
  "reason": "Standard appointment reminder with opt-out",
  "risk_score": 0.08,
  "alert_level": "NONE"
}
Use alert_level in your Android app:

CRITICAL = Red warning, block message
HIGH = Orange warning, strong caution
MEDIUM = Yellow warning, mild caution
LOW = Light warning, just flag it
NONE = No warning needed

Quick Test Commands
After starting your server, test these URLs in your browser:

Health check: http://localhost:5000/health
Run tests: http://localhost:5000/test

The test endpoint will show you exactly how well the improvements work with known examples.
What to Expect

Legitimate messages should now get confidence scores of 85-95
Scam messages should get confidence scores of 80-99
Unclear messages should get lower confidence scores (40-70)

This gives you much better control over when to warn users versus when to stay quiet.
The new system is much smarter about distinguishing between genuine business communications and actual fraud attempts. Your "everything is scam" problem should be completely solved!